# ТЗ Воронка-вебинар

### Бот для регистрации на вебинар


После запуска бота, он отслеживает все сообщения входящие и исходящие:

1. Пользователь пишет сообщение например: </br></br>
`Добрый день, хочу попасть на вебинар, что для этого нужно?`</br></br> **>>** `Бот добавляет в БД пользователя со статусом `**alive** `взаимодействие` **zero**</br></br>
2. Бот за менеджера автоматически ему отвечает через **6 минут** после последнего сообщения от пользователя</br></br>`Добрый день, пришлите свои контактные данные в ответном сообщении`</br></br>**>>** `Бот изменяет в БД пользователя взаимодействие` **one**</br></br>
3. Пользователь пишет сообщение с контактными данными или несколько</br></br>**>>** `Бот изменяет в БД пользователя время последнего сообщения`</br></br>
4. Бот отвечает пользователю через **39 минут** после последнего сообщения</br></br>`Ваша заявка принята, ссылка на мероприятие будет оправлена позже`</br></br>**>>** `Бот изменяет в БД пользователя взаимодействие` **two**</br></br>
5. Через **1 день 2 часа** после последнего сообщения от пользователя бот отправляет сообщение: </br></br>`Ccылка на мероприятие готова! Добро пожаловать! link`</br></br>**>>** `Бот изменяет в БД пользователя взаимодействие` **three** `статус `**finished**</br></br>

Дополнительные условия работы:

- Бот игнорирует чаты, каналы, и исходящие сообщения (на них не отвечает)</br></br>
- Если менеджер (с акаунта бота) отправляет в чат сообщение содержащее одно из СТОП СЛОВ ('**прекрасно**', '**ожидать**'), 
бот переводит взаимодействие в режим 'manual' и больше не реагирует на сообщения в данном диалоге.</br></br>
- Отлавливание возможной ошибки отправки, при блокировке аккаунта (работает только для бот-аккаунтов)


